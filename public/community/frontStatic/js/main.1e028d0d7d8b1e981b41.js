webpackJsonp([1],{0:function(t,e,n){n("briU"),t.exports=n("NHnr")},"3ntp":function(t,e){},"4vNF":function(t,e){},"5gk/":function(t,e){},D9hl:function(t,e){},FhoZ:function(t,e,n){"use strict";(function(e){const o=n("z0pV");t.exports={dev:{assetsSubDirectory:"static",assetsPublicPath:"/",proxyTable:{"/community_manage":{target:"http://magix.xyz:3000",changeOrigin:!0}},host:"0.0.0.0",port:8080,autoOpenBrowser:!1,errorOverlay:!0,notifyOnErrors:!0,poll:!1,mock:!0,devtool:"cheap-module-eval-source-map",cacheBusting:!0,cssSourceMap:!0},build:{index:o.resolve(e,"../dist/index.html"),assetsRoot:o.resolve(e,"../dist"),assetsSubDirectory:"frontStatic",assetsPublicPath:"./",productionSourceMap:!0,devtool:"#source-map",productionGzip:!1,productionGzipExtensions:["js","css"],bundleAnalyzerReport:Object({NODE_ENV:"production"}).npm_config_report}}}).call(e,"/")},KCvb:function(t,e){},LSqC:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("XEXE");var o=n("YfOU"),a=n.n(o),s=n("PVEY"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("keep-alive",[this.$route.meta.keepAlive?e("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():e("router-view")],1)},staticRenderFns:[]};var i=n("C7Lr")({name:"App"},r,!1,function(t){n("XJfX")},null,null).exports,l=n("KGCO"),u={login:"/community_manage/user/login",signout:"community_manage/user/signout",signin:"community_manage/user/create",getUser:"community_manage/user/search",checkUser:"community_manage/user/check",changeAuth:"community_manage/user/changeAuth",update:"community_manage/user/update",saveNews:"community_manage/news/save",searchNews:"community_manage/news/search",deleteNews:"community_manage/news/delete",saveHouse:"community_manage/house/save",getList:"community_manage/house/list"},c={name:"login",data:function(){return{loginForm:{username:"",password:""},rules:{username:[{validator:function(t,e,n){""===e?n(new Error("请输入用户名")):n()},trigger:"blur"}],password:[{validator:function(t,e,n){""===e?n(new Error("请输入密码")):n()},trigger:"blur"}]}}},created:function(){},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$post(u.login,{username:e.loginForm.username,password:e.loginForm.password}).then(function(t){e.$store.commit("admin/updateUser",t),e.$router.push("/home")}).catch(function(t){e.$message(t.message)})})}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("el-card",{staticClass:"login__loginbox",attrs:{shadow:"hover"}},[n("header",{attrs:{slot:"header"},slot:"header"},[t._v("\n      后台管理系统\n    ")]),t._v(" "),n("el-form",{ref:"loginForm",staticClass:"login__loginform",attrs:{model:t.loginForm,"status-icon":"",rules:t.rules}},[n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("账号")])])],1),t._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("密码")])])],1),t._v(" "),n("router-link",{staticClass:"login__signup",attrs:{to:"signin"}},[t._v("注册新用户")]),t._v(" "),n("el-button",{staticClass:"login__loginbtn",attrs:{type:"primary"},on:{click:function(e){return t.submitForm("loginForm")}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var d=n("C7Lr")(c,m,!1,function(t){n("Oass")},null,null).exports,f={name:"signin",data:function(){var t=this;return{signinForm:{username:"",password:"",pass:"",address:""},rules:{username:[{validator:function(t,e,n){""===e?n(new Error("请输入用户名")):n()},trigger:"blur"}],password:[{validator:function(t,e,n){""===e?n(new Error("请输入密码")):n()},trigger:"blur"}],pass:[{validator:function(e,n,o){""===n?o(new Error("请输入密码")):t.signinForm.password===t.signinForm.pass?(console.log(t.pass),o()):o(new Error("两次输入密码不一致"))},trigger:"blur"}],address:[{validator:function(t,e,n){""===e?n(new Error("请输入住址")):n()},trigger:"blur"}]}}},created:function(){},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$post(u.signin,{username:e.signinForm.username,password:e.signinForm.password,pass:e.signinForm.pass}).then(function(t){e.$message("注册成功"),e.$router.replace("login")}).catch(function(t){e.$message(t.message)})})}}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"signin"},[n("el-card",{staticClass:"signin__signinbox",attrs:{shadow:"hover"}},[n("header",{attrs:{slot:"header"},slot:"header"},[t._v("\n            账号注册\n    ")]),t._v(" "),n("el-form",{ref:"signinForm",staticClass:"signin__signinform",attrs:{model:t.signinForm,"status-icon":"",rules:t.rules}},[n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:t.signinForm.username,callback:function(e){t.$set(t.signinForm,"username",e)},expression:"signinForm.username"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("账号")])])],1),t._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.signinForm.password,callback:function(e){t.$set(t.signinForm,"password",e)},expression:"signinForm.password"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("密码")])])],1),t._v(" "),n("el-form-item",{attrs:{prop:"pass"}},[n("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.signinForm.pass,callback:function(e){t.$set(t.signinForm,"pass",e)},expression:"signinForm.pass"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("确认")])])],1),t._v(" "),n("el-button",{staticClass:"signin__signinbtn",attrs:{type:"primary"},on:{click:function(e){return t.submitForm("signinForm")}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var h=n("C7Lr")(f,p,!1,function(t){n("yxKD")},null,null).exports,v={name:"magix_header",data:function(){return{active:"home",user:this.$store.state.admin.user}},created:function(){},computed:{onRoute:function(){return this.$route.name}},methods:{handleSelect:function(t,e){this.$router.push({name:t})},signout:function(){var t=this;this.$post(u.signout).then(function(e){t.$store.commit("admin/signout")})}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"magix-header"},[n("el-menu",{staticClass:"el-menu",attrs:{"default-active":t.onRoute,mode:"horizontal","background-color":"#409EFF","text-color":"#fff","active-text-color":"#ff0"},on:{select:t.handleSelect}},[n("el-menu-item",{attrs:{index:"home"}},[t._v("资讯管理")]),t._v(" "),n("el-menu-item",{attrs:{index:"house"}},[t._v("房屋信息")]),t._v(" "),n("el-menu-item",{attrs:{index:"tofix"}},[t._v("用户报修")]),t._v(" "),n("el-menu-item",{attrs:{index:"user_info"}},[t._v("个人信息")]),t._v(" "),"2"!==t.user.type?n("el-menu-item",{attrs:{index:"auth"}},[t._v("用户管理")]):t._e()],1),t._v(" "),n("div",{staticClass:"options"},[n("div",{staticClass:"option-item",on:{click:t.signout}},[t._v("退出")])])],1)},staticRenderFns:[]};var b={name:"home",components:{magixHeader:n("C7Lr")(v,g,!1,function(t){n("NpzX")},null,null).exports},data:function(){return{}},created:function(){},methods:{}},_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home"},[e("magix-header"),this._v(" "),e("keep-alive",[this.$route.meta.keepAlive?e("router-view",{staticClass:"fullheight"}):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():e("router-view",{staticClass:"fullheight"})],1)},staticRenderFns:[]};var w=n("C7Lr")(b,_,!1,function(t){n("4vNF")},null,null).exports,x={name:"magix_control",data:function(){return{}},created:function(){},methods:{refresh:function(){location.reload()}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"magix-control"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$emit("add",e)}}},[t._v("新增")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.refresh}},[t._v("刷新")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.$emit("delete",e)}}},[t._v("删除")])],1)},staticRenderFns:[]};var k=n("C7Lr")(x,y,!1,function(t){n("LSqC")},null,null).exports,$=n("rVsN"),C=n.n($),F={dateFormat:function(t){var e=new Date(t);return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()}},E=F;var L={name:"house",components:{magixControl:k},data:function(){return{user:this.$store.state.admin.user,tableData:[],dialogFormVisible:!1,formLabelWidth:"120px",form:{},editorOption:{},gridData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}],dialogTableVisible:!1}},created:function(){var t=this;(function(t){var e=this;return new C.a(function(n,o){e.$get(u.getList,t).then(function(t){n(function(t){var e=[];return t.house.length>0&&t.house.forEach(function(t,n){e.push({community:t.community,building:t.building,unit:t.unit,room:t.room,numbered:t.numbered,user:t.user})}),e}(t))}).catch(function(t){o(t)})})}).bind(this)().then(function(e){console.log(e),t.tableData=e}),function(t){var e=this;return new C.a(function(n,o){e.$get(u.getUser,{params:t}).then(function(t){n(t)}).catch(function(t){o(t)})})}.bind(this)({type:"2"}).then(function(t){console.log(t)})},methods:{initData:function(t){this.form=t?{community:t.community,building:t.building,unit:t.unit,room:t.room,numbered:t.numbered,userId:t.userId}:{community:"",building:"",unit:"",room:"",numbered:"",userId:"5c6f3dd08fe249093840de18"}},add:function(){this.initData(),this.dialogFormVisible=!0},submit:function(){(function(t){var e=this;return new C.a(function(n,o){e.$post(u.saveHouse,t).then(function(t){n(t)}).catch(function(t){o(t)})})}).bind(this)(this.form).then(function(t){console.log(t)})},showTable:function(){this.dialogTableVisible=!0},checkUser:function(){},getUser:function(t,e){console.log(t)},onEditorBlur:function(t){},onEditorFocus:function(t){},onEditorReady:function(t){}}},A={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"house"},[n("magix-control",{on:{add:t.add}}),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",border:""}},[n("el-table-column",{attrs:{prop:"user.nickname",label:"房主"}}),t._v(" "),n("el-table-column",{attrs:{prop:"community",label:"小区",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"building",label:"栋",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"numbered",label:"加密编号",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"unit",label:"单元",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"room",label:"室",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"}},[t._v("审核")]),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"}},[t._v("权限")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:"房屋信息",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{attrs:{model:t.form}},[n("el-form-item",{attrs:{label:"小区","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.community,callback:function(e){t.$set(t.form,"community",e)},expression:"form.community"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"栋","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.building,callback:function(e){t.$set(t.form,"building",e)},expression:"form.building"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"单元","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.unit,callback:function(e){t.$set(t.form,"unit",e)},expression:"form.unit"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"室","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.room,callback:function(e){t.$set(t.form,"room",e)},expression:"form.room"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"是","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.numbered,callback:function(e){t.$set(t.form,"numbered",e)},expression:"form.numbered"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"房主","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},on:{focus:t.showTable},model:{value:t.form.numbered,callback:function(e){t.$set(t.form,"numbered",e)},expression:"form.numbered"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"收货地址",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[n("el-table",{attrs:{data:t.gridData,"highlight-current-row":""},on:{"current-change":t.getUser}},[n("el-table-column",{attrs:{property:"date",label:"日期",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{property:"name",label:"姓名",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{property:"address",label:"地址"}})],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.checkUser}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var D=n("C7Lr")(L,A,!1,function(t){n("xTks")},null,null).exports,S={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"tofix"},[this._v("\n  tofix\n")])},staticRenderFns:[]};var N=n("C7Lr")({name:"tofix",components:{},data:function(){return{}},created:function(){},methods:{}},S,!1,function(t){n("esDU")},null,null).exports,R=["超级管理员","管理员","用户"],T=["超级管理员","未审核","已审核"];function V(t){var e=this;return new C.a(function(n,o){e.$get(u.getUser,{params:{type:t}}).then(function(t){n(function(t){var e=[];t.users.length>0&&t.users.forEach(function(t,n){e.push({username:t.username,name:t.nickname,address:t.house&&t.house.address||"-",date:E.dateFormat(t.meta.createAt),type:{name:R[t.type],value:t.type},statu:{name:T[t.statu],value:t.statu}})});return e}(t))}).catch(function(t){o(t)})})}var W={name:"auth",data:function(){return{tableData:[],user:this.$store.state.admin.user}},created:function(){this.getList()},methods:{getList:function(){var t=this;V.bind(this)(this.user.type).then(function(e){t.tableData=e,console.log(e)})},handleCheck:function(t){var e=this;(function(t){var e=this;return new C.a(function(n,o){e.$post(u.checkUser,{username:t}).then(function(t){n(t)}).catch(function(t){o(t)})})}).bind(this)(t.username).then(function(t){e.getList(),e.$message("审核通过！")})},changeAuth:function(t){var e=this;this.$prompt("请输入权限","修改选线",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/['1','2']/,inputErrorMessage:"权限输入错误"}).then(function(n){var o=n.value;(function(t){var e=this;return new C.a(function(n,o){e.$post(u.changeAuth,t).then(function(t){n(t)}).catch(function(t){o(t)})})}).bind(e)({username:t.username,type:o}).then(function(t){e.getList(),e.$message({type:"success",message:"修改成功"})})}).catch(function(){e.$message({type:"info",message:"取消输入"})})}}},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"auth"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",border:""}},[n("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"type.name",label:"类别",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"statu.name",label:"审核",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"date",label:"日期",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"address",label:"地址"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===e.row.statu.value?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.handleCheck(e.row)}}},[t._v("审核")]):t._e(),t._v(" "),"admin"===t.user.username?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.changeAuth(e.row)}}},[t._v("权限")]):t._e()]}}])})],1)],1)},staticRenderFns:[]};var U=n("C7Lr")(W,O,!1,function(t){n("y8we")},null,null).exports,z={name:"magix_aside",data:function(){return{isCollapse:!1}},created:function(){},computed:{onRoute:function(){return this.$route.name}},methods:{handleSelect:function(t,e){this.$router.push(t)},handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)}}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"magix-aside"},[n("el-menu",{staticClass:"el-menu-vertical",attrs:{"default-active":t.onRoute,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",collapse:t.isCollapse},on:{open:t.handleOpen,close:t.handleClose,select:t.handleSelect}},[n("el-menu-item",{attrs:{index:"user_info"}},[n("i",{staticClass:"el-icon-document"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("个人信息")])]),t._v(" "),n("el-menu-item",{attrs:{index:"reset_password"}},[n("i",{staticClass:"el-icon-setting"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v("修改密码")])])],1)],1)},staticRenderFns:[]};var B=n("C7Lr")(z,I,!1,function(t){n("5gk/")},null,null).exports,M={name:"user",components:{magixAside:B},data:function(){return{}},created:function(){},methods:{}},X={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"user"},[e("magix-aside",{staticClass:"aside"}),this._v(" "),e("keep-alive",[this.$route.meta.keepAlive?e("router-view",{staticClass:"content"}):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():e("router-view",{staticClass:"content"})],1)},staticRenderFns:[]};var P=n("C7Lr")(M,X,!1,function(t){n("rrDd")},null,null).exports,q={name:"user_info",data:function(){return{form:{},ADMIN_TYPE:R,user:this.$store.state.admin.user}},created:function(){this.form={username:this.user.username,nickname:this.user.nickname,password:this.user.password,carNum:this.user.car&&this.user.car.carNumber||"",address:this.user.house&&this.user.house.address||"",type:this.user.type}},methods:{update:function(){var t=this;(function(t){var e=this;return new C.a(function(n,o){e.$post(u.update,t).then(function(t){n(t)}).catch(function(t){o(t)})})}).bind(this)({username:this.user.username,nickname:this.form.nickname,car:{carNumber:this.form.carNum},house:{address:this.form.address}}).then(function(e){t.$store.commit("admin/updateUser",e.user),t.$message("保存成功")})}}},H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-info"},[n("el-card",{staticClass:"box-card"},[n("el-form",{ref:"form",staticClass:"userform",attrs:{model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"用户名："}},[n("span",[t._v(t._s(t.form.username))])]),t._v(" "),n("el-form-item",{attrs:{label:"昵称："}},[n("el-input",{model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"密码："}},[n("span",[t._v(t._s(t.form.password))])]),t._v(" "),n("el-form-item",{attrs:{label:"车牌号："}},[n("el-input",{model:{value:t.form.carNum,callback:function(e){t.$set(t.form,"carNum",e)},expression:"form.carNum"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"地址："}},[n("el-input",{model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"权限："}},[n("span",[t._v(t._s(t.ADMIN_TYPE[t.form.type]))])]),t._v(" "),n("div",{staticClass:"save-btn"},[n("el-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var j=n("C7Lr")(q,H,!1,function(t){n("sWUF")},null,null).exports,J={name:"reset_password",components:{magixAside:B},data:function(){return{form:{}}},created:function(){},methods:{}},K={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reset-password"},[n("el-card",{staticClass:"box-card"},[n("el-form",{ref:"form",staticClass:"userform",attrs:{model:t.form,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"新密码："}},[n("el-input",{model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"确认密码："}},[n("el-input",{model:{value:t.form.pass,callback:function(e){t.$set(t.form,"pass",e)},expression:"form.pass"}})],1),t._v(" "),n("div",{staticClass:"save-btn"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){}}},[t._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var Y=n("C7Lr")(J,K,!1,function(t){n("lQHB")},null,null).exports;function Z(t){var e=this;return new C.a(function(n,o){e.$get(u.searchNews,{params:t}).then(function(t){n(t)}).catch(function(t){o(t)})})}var G={name:"news",components:{magixControl:k},filters:{dateFormat:function(t){return E.dateFormat(t)}},data:function(){return{user:this.$store.state.admin.user,news:[],length:0,dialogFormVisible:!1,formLabelWidth:"120px",form:{},editorOption:{}}},mounted:function(){var t=this;Z.bind(this)({count:10,index:0}).then(function(e){t.news=e.news.slice(0,10),t.length=e.length})},methods:{initData:function(t){this.form=t?{title:t.title,type:t.type,sub:t.sub,content:t.content,images:t.images,_id:t._id}:{title:"",type:"",sub:"",content:"",images:"",_id:""}},add:function(){this.initData(),this.dialogFormVisible=!0},openDetail:function(t){this.initData(t),this.dialogFormVisible=!0},onEditorBlur:function(t){},onEditorFocus:function(t){},onEditorReady:function(t){},submit:function(){this.dialogFormVisible=!1,function(t){var e=this;return new C.a(function(n,o){e.$post(u.saveNews,t).then(function(t){n(t)}).catch(function(t){o(t)})})}.bind(this)({title:this.form.title,sub:this.form.sub,images:this.form.images,content:this.form.content,type:this.form.type,userId:this.user._id,_id:this.form._id}).then(function(t){})},deleteNews:function(t){var e=this;console.log(t),this.deleteMsg("此操作将永久删除该文件, 是否继续?").then(function(){(function(t){var e=this;return new C.a(function(n,o){e.$post(u.deleteNews,t).then(function(t){n(t)}).catch(function(t){o(t)})})}).bind(e)({_id:t._id}).then(function(t){e.$message({type:"success",message:"删除成功!"})})})},getList:function(t){var e=this;Z.bind(this)({count:10,index:t-1}).then(function(t){e.news=t.news.slice(0,10)})},currentChange:function(t){console.log(t),this.getList(t)}}},Q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"news"},[n("magix-control",{on:{add:t.add}}),t._v(" "),n("div",{staticClass:"container"},[t._l(t.news,function(e,o){return n("el-card",{key:o,staticClass:"box-card",nativeOn:{click:function(n){return t.openDetail(e)}}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",{staticClass:"title"},[t._v(t._s(e.title))])]),t._v(" "),n("div",{staticClass:"box-content"},[n("p",{staticClass:"sub"},[t._v(t._s(e.sub))]),t._v(" "),n("div",{staticClass:"foot"},[n("span",{staticClass:"author"},[t._v(t._s(e.user.nickname))]),t._v(" "),n("time",{staticClass:"time"},[t._v(t._s(t._f("dateFormat")(e.meta.updateAt)))])])]),t._v(" "),n("i",{staticClass:"el-icon-error delete",on:{click:function(n){return n.stopPropagation(),t.deleteNews(e)}}})])}),t._v(" "),0===t.news.length?n("div",{staticClass:"empty"},[t._v("暂无数据")]):t._e()],2),t._v(" "),n("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next",total:t.length},on:{"current-change":t.currentChange}}),t._v(" "),n("el-dialog",{attrs:{title:"小区资讯",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{attrs:{model:t.form}},[n("el-form-item",{attrs:{label:"资讯标题","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"资讯类型","label-width":t.formLabelWidth}},[n("el-select",{attrs:{placeholder:"请选择资讯类型"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[n("el-option",{attrs:{label:"租赁",value:"1"}}),t._v(" "),n("el-option",{attrs:{label:"新鲜事",value:"2"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"副标题","label-width":t.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.sub,callback:function(e){t.$set(t.form,"sub",e)},expression:"form.sub"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"正文","label-width":t.formLabelWidth}},[n("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{blur:function(e){return t.onEditorBlur(e)},focus:function(e){return t.onEditorFocus(e)},ready:function(e){return t.onEditorReady(e)}},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var tt=n("C7Lr")(G,Q,!1,function(t){n("KCvb")},null,null).exports;s.default.use(l.a);var et=new l.a({routes:[{path:"*",redirect:"/home"},{path:"/login",name:"login",component:d,meta:{auth:!1,keepAlive:!1}},{path:"/signin",name:"signin",component:h,meta:{auth:!1,keepAlive:!1}},{path:"/",component:w,redirect:"/home",meta:{auth:!0,keepAlive:!1},children:[{path:"/home",name:"home",component:tt,meta:{auth:!0,keepAlive:!1}},{path:"/house",name:"house",component:D,meta:{auth:!0,keepAlive:!1}},{path:"/tofix",name:"tofix",component:N,meta:{auth:!0,keepAlive:!1}},{path:"/auth",name:"auth",component:U,meta:{auth:!0,keepAlive:!1}},{path:"/user",name:"user",component:P,meta:{auth:!0,keepAlive:!1},children:[{path:"/user/user_info",name:"user_info",component:j,meta:{auth:!0,keepAlive:!1}},{path:"/user/reset_password",name:"reset_password",component:Y,meta:{auth:!0,keepAlive:!1}}]}]}]});et.beforeEach(function(t,e,n){t.meta.auth?window.localStorage.getItem("token")?n():n("login"):n()});var nt=et,ot=(n("lBgt"),n("xsZ7"),n("Tqfo"),n("lMgl"),n("D9hl"),n("3ntp"),n("FhoZ"),n("aozt")),at=n.n(ot),st={900:"后台错误",500:"请输入检索内容"},rt=n("R4Sj"),it=n("3cXf"),lt=n.n(it),ut={namespaced:!0,state:{token:localStorage.getItem("token"),user:JSON.parse(window.localStorage.getItem("user"))},mutations:{updateUser:function(t,e){window.localStorage.setItem("user",lt()(e)),t.user=JSON.parse(window.localStorage.getItem("user"))},signout:function(t){nt.replace("login"),t.token=null,t.user=null,window.localStorage.removeItem("token"),window.localStorage.removeItem("user")}}};s.default.use(rt.a);var ct=new rt.a.Store({modules:{admin:ut}});s.default.$axios=s.default.prototype.$axios=at.a,s.default.$axios.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",at.a.interceptors.request.use(function(t){return localStorage.getItem("token")&&(t.headers.Authorization="token "+localStorage.getItem("token")),t},function(t){return C.a.reject(t)}),at.a.interceptors.response.use(function(t){return 10010===t.data.code||10011===t.data.code?(localStorage.removeItem("token"),router.replace({path:"/login"})):t.data.token&&localStorage.setItem("token",t.data.token),t},function(t){return C.a.reject(t)}),s.default.$get=s.default.prototype.$get=function(t,e){return new C.a(function(n,o){s.default.$axios.get(t,e).then(function(t){200===t.data.code?n(t.data.data):o({code:t.data.code,message:st[t.data.code]||t.data.message})})})},s.default.$post=s.default.prototype.$post=function(t,e){return new C.a(function(n,o){s.default.$axios.post(t,e).then(function(t){200===t.data.code?n(t.data.data):o({code:t.data.code,message:st[t.data.code]||t.data.message})})})};var mt=n("aiqZ"),dt=n.n(mt);s.default.mixin({methods:{deleteMsg:function(t){var e=this;return new C.a(function(n,o){e.$confirm(t,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n()}).catch(function(){e.$message({type:"info",message:"已取消删除"})})})}}}),s.default.use(a.a),s.default.use(dt.a),s.default.config.productionTip=!1,s.default.mixin({methods:{cw:function(){return window.innerWidth}}}),s.default.directive("title",{componentUpdated:function(t,e){document.title=e.value}}),new s.default({el:"#app",router:nt,store:ct,components:{App:i},template:"<App/>",data:function(){return{screenWidth:document.body.clientWidth,timer:!1}},watch:{screenWidth:function(t){if(!this.timer){this.screenWidth=t,this.timer=!0;var e=this;setTimeout(function(){e.timer=!1},400)}}},mounted:function(){var t=this;window.onresize=function(){t.screenWidth=document.body.clientWidth}}})},NpzX:function(t,e){},Oass:function(t,e){},Tqfo:function(t,e){},XEXE:function(t,e){},XJfX:function(t,e){},esDU:function(t,e){},lBgt:function(t,e){},lMgl:function(t,e){},lQHB:function(t,e){},rrDd:function(t,e){},sWUF:function(t,e){},xTks:function(t,e){},xsZ7:function(t,e){},y8we:function(t,e){},yxKD:function(t,e){}},[0]);
//# sourceMappingURL=main.1e028d0d7d8b1e981b41.js.map